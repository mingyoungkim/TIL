# Django

## 03ì›” 12ì¼

### ğŸŒ ìˆœì„œ ì •ë¦¬ ğŸŒ

#### 1. ê°€ìƒí™˜ê²½ ì„¤ì¹˜

- í”„ë¡œì íŠ¸ í´ë” ìƒì„±
- vs codeë¡œ í‚¤ê¸°

- gitignore.io ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° (.gitignore íŒŒì¼ì—)

  => venvì™€ db.sqlite3 í™•ì¸



- venv í™œì„±í™”

```bash
$ python -m venv venv
	=> python -m venv ë§Œë“¤ì–´ì¤„ venví´ë” ì´ë¦„
$ source venv/Scripts/activate
$ pip list

â€‹```
í™œì„±í™” ë„ê¸°
$ deactivate
	=> í„°ë¯¸ë„ ì°½ì„ ë‹«ê±°ë‚˜ vs code ë„ë©´ ìë™ì ìœ¼ë¡œ ë¹„í™œì„±í™” ë¨
â€‹```

$ pip install django
$ pip freeze > requirements.txt
	=> ì¶œë ¥ ê²°ê³¼ë¥¼ requirements.txtì— ì‘ì„± (ìë™ìœ¼ë¡œ íŒŒì¼ ìƒì„±)

$ django-admin startproject í”„ë¡œì íŠ¸ì´ë¦„ .
$ python manage.py startapp ì•±ì´ë¦„
```

```bash
âš¡ ë°ì´í„° pairí•˜ê¸° âš¡

1. ë°ì´í„°ë² ì´ìŠ¤ì— ìˆëŠ” ë°ì´í„° ë‹´ê¸° (ë³´ê¸°ì¢‹ì€ í˜•íƒœë¡œ ë‹´ê¸°)
$ python manage.py dumpdata --indent 2 > crud.json
$ python manage.py dumpdata --indent 4 > articles.json
$ python manage.py dumpdata auth --index 4 > auth.json
	=> userì— ëŒ€í•œ ì •ë³´ê°€ ë‹´ê²¨ìˆëŠ” auth_user ë°ì´í„° ë‹´ê¸°
$ python manage.py dumpdata auth.user --indent 4 > user.json
	=> tableë³„ë¡œ í•„ìš”í•œ ê²ƒë§Œ ë‹´ê³  ì‹¶ìœ¼ë©´ (ì§€ê¸ˆì€ userë§Œ ê°€ì ¸ì˜¨ ê²ƒ)

2. pairì—ê²Œ ë°ì´í„° ë³´ë‚´ì£¼ê¸°
$ python manage.py dumpdata movies.movie
	=> ì•±ì´ë¦„.ëª¨ë¸ì˜ í´ë˜ìŠ¤ ì´ë¦„ ì†Œë¬¸ìë¡œ ì‘ì„±
$ python manage.py dumpdata --indent 4 movies.movie
	=> ë“¤ì—¬ì“°ê¸° 4ì¹¸ì”© í•´ì„œ ë³´ê¸° í¸í•˜ê²Œ
$ python manage.py dumpdata --indent 4 movies.movie > movies.json
	=> movies.jsonë¼ëŠ” íŒŒì¼ì„ ìë™ ìƒì„±í•˜ê³  ê·¸ê³³ì— ë°ì´í„° ì €ì¥
	=> í´ë”ì— fixturesë¼ëŠ” í´ë” ë§Œë“¤ê³  moviesí´ë” ë§Œë“¤ê¸°
    	(ì—¬ê¸°ì— movies.json íŒŒì¼ ì˜®ê¸°ê¸°)
	=> git push
	
3. pullí•œ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
$ python manage.py loaddata movies/movies.json
```



#### 2. pjtì˜ settings.py

- í”„ë¡œì íŠ¸ í´ë”ì— ì•± ë“±ë¡

- ì‹œê°„/ ì–¸ì–´ ë°”ê¿”ì£¼ê¸°



#### 3. articles appì— models.pyì— model ì •ì˜

```python
class Article(models.Model):
    # titleì€ ê¸¸ì´ ì œí•œì´ í•„ìš”í•˜ë¯€ë¡œ CharFiedl classì‚¬ìš©
    title = models.CharField(max_lenght=10)
    content = models.TextField()
    # ì²˜ìŒ ê²Œì‹œí•œ ì‹œê°„ì€ ì¸ìë¥¼ auto_now_addë¡œ í•œë²ˆë§Œ ë°›ì•„ì˜´
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

```bash
$ python manage.py makemigrations

$ python manage.py migrate

$ python manage.py loaddata movies.json
	=> movies.jsoníŒŒì¼ì˜ ë°ì´í„° ì—…ë¡œë“œ (ì˜ˆì‹œì„)
```



#### 05. pjt base.html ìƒì„±

- ê³µí†µì ìœ¼ë¡œ ìƒì†ë°›ì„ base.html ìƒì„± => ìµœìƒìœ„ì— templates í´ë” ë§Œë“¤ê¸°
- settingsì— templatesê´€ë¦¬í•˜ëŠ” êµ¬ê°„ì—  DIRSì¶”ê°€
  - templates ì„¤ì •

```python
'DIRS': [BASE_DIR / 'templates'],
```



#### 06. ê²½ë¡œ ì„¤ì •

- í”„ë¡œì íŠ¸ì˜ urls.pyì— ì•±ì˜ urls.py ê²½ë¡œ ì„¤ì •

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    # ì•±ì˜ urls.pyë¡œ ê²½ë¡œ ì„¤ì •
    path('articles/', include('articles.urls')),
]
```

- ì•±ì— urls.py ë§Œë“¤ê³  ê²½ë¡œ ì„¤ì •

```python
from django.urls import path
# í˜„ í´ë”ì˜ viesw íŒŒì¼ì—ì„œ ê°€ì ¸ì˜¤ê¸°
from . import views

# app_nameì€ ê°™ì€ html ì´ë¦„ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì•±ë§ˆë‹¤ ì´ë¦„ ì„¤ì •
app_name = 'articles'

urlpatterns = [
    # viesw.pyì— ì •ì˜ëœ í•¨ìˆ˜ ì‚¬ìš©í•˜ëŠ” ê²½ë¡œ ì‘ì„±í•˜ê¸°
    path(ë¸”ë¼ë¸”ë¼),
]
```



#### 07. INDEX í˜ì´ì§€ ë§Œë“¤ê¸°

- ì•±ì˜ views.pyì— í•¨ìˆ˜ ì •ì˜

- ì•±ì— templates/articles/ë©”ì¸í˜ì´ì§€.html ë§Œë“¤ê¸° (templates ë Œë”ë§)

  => ìƒì†ë°›ê²Œ ë§Œë“¤ê¸°
  
  

#### 08. ìƒˆë¡œìš´ model form ìƒì„±

- articles appì— forms.py ìƒì„±

- model ë“±ë¡, fields ë“±ë¡



- CRUDB
- ë‹¨ë‹¨í•œ í˜ì´ì§€ ë§Œë“¤ê¸° (view decorator)
  - require_POST 
  - get_object_or_404()