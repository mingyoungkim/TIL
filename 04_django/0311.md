# Django

## 03월 11일

### 🌞 순서 정리 🌞

```
$ django-admin startproject 프로젝트이름 .

$ python manage.py startapp 앱이름
```

--------------------------------------

- pjt의 settings.py

  - 프로젝트 폴더에 앱 등록

  - 시간/ 언어 바꿔주기

--------------------------------------

- articles app에 models.py에 model 정의

```python
class Article(madels.Model):
    # title은 길이 제한이 필요하므로 CharFiedl class사용
    title = models.CharField(max_lenght=10)
    content = models.TextField()
    # 처음 게시한 시간은 인자를 auto_now_add로 한번만 받아옴
    created_at = models.DateTimeField(auto_now_add=True)
    updated_at = models.DateTimeField(auto_now=True)
```

```
$ python manage.py makemigrations

$ python manage.py migrate
```

-------------------------------------------------------------

- 새로운 model form 생성

  - articles app에 forms.py 생성

  - model 등록, fields 등록

--------------------------------------

- 공통적으로 상속받을 base.html 생성 => 최상위에 templates 폴더 만들기
- settings에 templates관리하는 구간에  DIRS추가
  - templates 설정
  - STATIC_ROOT
  - MIDEA_ROOT

```python
'DIRS': [BASE_DIR / 'templates'],
```

--------------------------------------

- 프로젝트의 urls.py에 앱의 urls.py 경로 설정

```python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('admin/', admin.site.urls),
    # 앱의 urls.py로 경로 설정
    path('articles/', include('articles.urls')),
]
```

- 앱에 urls.py 만들고 경로 설정

```python
from django.urls import path
# 현 폴더의 viesw 파일에서 가져오기
from . import views

# app_name은 같은 html 이름이 있을 수 있으므로 앱마다 이름 설정
app_name = 'articles'

urlpatterns = [
    # viesw.py에 정의된 함수 사용하는 경로 작성하기
    path(블라블라),
]
```

- 앱의 views.py에 함수 정의

- 앱에 templates/articles/메인페이지.html 만들기 (templates 렌더링)

  => 상속받게 만들기

-----------------------------------

- CRUDB

- 단단한 페이지 만들기 (view decorator)
  - require_POST 
  - get_object_or_404()