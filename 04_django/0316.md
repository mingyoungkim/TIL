# Django

## 03월 16일

### 01. Form

> 정의

- form태그를 작성하기 위해서 주요 유효성 검사 도구들 중 하나,

  => 유효성 검사란? :  Null 등을 검사하는 것

- django는 form과 관련된 작업을 처리

  - 렌더링을 위한 데이터 준비 및 재구성 (model에서 정의한 것을 데려와 사용)
  - 데이터에 대한 HTML forms 생성
  - 클라이언트로 받은 데이터 수신 및 처리

- 특정한 데이터를 주고 받기위한 form들을 정의해주는 것



> Form Class

- label

- widget

  - HTML 렌더링 처리

  - Form Fields와 혼동되면 안됨
  - input 유효성 검사 처리

- 유효하지 않는 field에 관한 에러메세지

- **반복 코드를 줄여줌**

  (html에 form태그를 사용하고 label, input, label, textarea,,,,의 작업을 줄여줌)

- 모델에 없는 사용할 데이터도 정의해 줄 수 있다. (즉, 상세한 설정 가능해서 커스터마이징 수월)

- articles/forms.py

```python
from django import forms

# Article model에 대한 Form이여서
class ArticleForm(forms.Form):
    # model에 정의한 컬럼들에 대한 내용들 넣어줌
    title = forms.CharField(max_length=10)
    # TextField없음
    content = forms.CharField(
        # 없어서 input태그 였던 것을 textarea로 바꿔줌
        # widget : 필드가 어떻게 정의되는 건지 추가적인 옵션을 정의하는 것
        widget=forms.Textarea
    )
```

- articles/views.py

```python
from django.shortcuts import render
from .models import Article
from .forms import ArticleForm

# form태그 사용하는 new페이지
def new(request):
    # 정의한 form 불렁오기
    form = ArticleForm
    context ={
        'form': form
    }
    return render(request, 'articles/new.html', context)
```

- templates/news.html

```html
{% extends 'base.html' %}

{% block content %}
  <h1>NEW PAGE</h1>
  <hr>
  <form action="" method="POST">
    {% csrf_token %}
    <!--내가 넘겨준 form이라는 key값을 가져오면 됨-->
    {{ form }}
    <input type="submit">
  </form>
{% endblock content %}
```



### 02. Model Form

> 정의

- Form 과는 다르게 모두 정의해 주는 것보다 중복표현 줄여줌

- model을 통해 Form Class 만들 수 있는 Helper

- 일반 Form 과 완전히 같은 방식

  - 일반 Form => forms.Form
  - model Form =>

- Meta Class

  - Meta data (데이터에 대한 데이터)

    => 데이터를 정의하기 위한 데이터정보

  - ModelForm을 정의하기 위한 class => Meta Class

  - Model의 정보를 작성하는 곳

  - 해당 model에 정의한 field 정보를 Form에 적용

```python
from django import forms
from .models import Article


class ArticleForm(forms.ModelForm):

    class Meta:
        # 어떤 모델에 대한 정보 저장
        model = Article
        # 어떤 필드에 대한 정보 저장
        # Article이 가진 모든 필드를 불러오자 (title, content,,)
        fields = '__all__'
        # fields = ('title', 'content') 처럼 일일히 넣어도 됨

# => 단 세줄에 model에 정의한 Article 클래스 사용
```

